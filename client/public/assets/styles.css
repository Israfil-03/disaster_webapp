/* Hide role selector when role is locked by auth */
.role-hidden { display: none; }

/* Connection Status Indicator */
.connection-status {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.25rem 0.75rem;
  background: var(--muted);
  border-radius: 1rem;
  font-size: 0.875rem;
  color: var(--sub);
}

.connection-indicator {
  font-size: 0.75rem;
  line-height: 1;
}

.connection-indicator.online {
  color: var(--ok);
  animation: pulse-online 2s infinite;
}

.connection-indicator.offline {
  color: var(--danger);
  animation: pulse-offline 1s infinite;
}

.connection-indicator.connecting {
  color: var(--warn);
  animation: pulse-connecting 1.5s infinite;
}

.connection-text {
  font-weight: 500;
}

@keyframes pulse-online {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

@keyframes pulse-offline {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.4; }
}

@keyframes pulse-connecting {
  0%, 100% { opacity: 0.5; }
  50% { opacity: 1; }
}

/* Notification System */
.notification-container {
  position: fixed;
  top: 1rem;
  right: 1rem;
  z-index: 9999;
  max-width: 400px;
  pointer-events: none;
}

.notification {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 0.5rem;
  margin-bottom: 0.5rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  pointer-events: auto;
  transform: translateX(100%);
  opacity: 0;
  transition: all 0.3s ease;
}

.notification.notification-show {
  transform: translateX(0);
  opacity: 1;
}

.notification.notification-hide {
  transform: translateX(100%);
  opacity: 0;
}

.notification-content {
  display: flex;
  align-items: flex-start;
  gap: 0.75rem;
  padding: 1rem;
}

.notification-icon {
  font-size: 1.25rem;
  flex-shrink: 0;
  margin-top: 0.125rem;
}

.notification-message {
  flex: 1;
  color: var(--text);
  font-size: 0.875rem;
  line-height: 1.4;
}

.notification-close {
  background: none;
  border: none;
  color: var(--sub);
  font-size: 1.25rem;
  cursor: pointer;
  padding: 0;
  width: 1.5rem;
  height: 1.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 0.25rem;
  flex-shrink: 0;
}

.notification-close:hover {
  background: var(--muted);
  color: var(--text);
}

.notification-success {
  border-left: 4px solid var(--ok);
}

.notification-error {
  border-left: 4px solid var(--danger);
}

.notification-warning {
  border-left: 4px solid var(--warn);
}

.notification-info {
  border-left: 4px solid var(--accent);
}
/* For now we are using a simple CSS approach. Need to upgrade to tailwind or bootstrap later. */

/* =============================================================================
   Purpose: Theming, layout, component styles for the single-page app  
   - Variables: see :root tokens below
   - Layout utilities: .grid, .row, .mt-*, .mb-*, alignment helpers
   - Components: .card, .tabs, .chip, tables, profile dropdown
   - Education page: .education-* and .video-* classes control videos
   - Role and contrast: .role-* badges; .contrast toggled via JS
   ============================================================================= */


/* Theme Section-Light/Dark */

:root{
  /* dark theme defaults */
  --bg:#0f172a;          /* slate-900 */
  --panel:#111827;       /* gray-900 */
  --muted:#1f2937;       /* gray-800 */
  --card:#0b1222;        /* deep navy */
  --text:#e5e7eb;        /* gray-200 */
  --sub:#cbd5e1;         /* slate-300 */
  --brand:#22c55e;       /* green-500 */
  --accent:#38bdf8;      /* sky-400 */
  --warn:#f59e0b;        /* amber-500 */
  --danger:#ef4444;      /* red-500 */
  --ok:#10b981;          /* emerald-500 */
  --focus:#93c5fd;       /* blue-300 */
  --border:#1f2937;      /* gray-800 */
  --chip:#0b2430;        /* teal-ish */
}

/* Light theme overrides */
.theme-light{
  --bg:#f6f8fb;          /* light slate */
  --panel:#ffffff;
  --muted:#e5e7eb;       /* gray-200 */
  --card:#ffffff;
  --text:#0f172a;        /* slate-900 */
  --sub:#334155;         /* slate-700 */
  --brand:#16a34a;       /* green-600 a bit darker on light */
  --accent:#0284c7;      /* sky-600 */
  --warn:#b45309;        /* amber-700 */
  --danger:#b91c1c;      /* red-700 */
  --ok:#059669;          /* emerald-600 */
  --focus:#2563eb;       /* blue-600 */
  --border:#d1d5db;      /* gray-300 */
  --chip:#e6f4f1;        /* soft teal */
}

/* Respect system preference when no explicit theme class applied */
@media (prefers-color-scheme: light){
  :root:not(.theme-dark):not(.theme-light){
    --bg:#f6f8fb;
    --panel:#ffffff;
    --muted:#e5e7eb;
    --card:#ffffff;
    --text:#0f172a;
    --sub:#334155;
    --brand:#16a34a;
    --accent:#0284c7;
    --warn:#b45309;
    --danger:#b91c1c;
    --ok:#059669;
    --focus:#2563eb;
    --border:#d1d5db;
    --chip:#e6f4f1;
  }
}

*{
  box-sizing:border-box
}

html,body{
  height:100%
}

body{
  margin:0;
  background:linear-gradient(180deg, color-mix(in srgb, var(--bg) 98%, #000) 0%, var(--bg) 40%, var(--bg) 100%);
  color:var(--text);
  font:400 16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;
}

/* Inline SVG icon defaults */
.icon-inline svg{
  width:1em;
  height:1em;
  display:inline-block;
  vertical-align:middle;
  stroke:currentColor;
  fill:none;
}
.icon-missing{
  width:1em;
  height:1em;
  display:inline-block;
  background:linear-gradient(45deg,transparent 45%, rgba(239,68,68,.8) 45% 55%, transparent 55%);
  border-radius:2px;
  opacity:.6;
}

a{
  color:var(--accent);
  text-decoration:none
}

a:focus,button:focus,input:focus,select:focus,textarea:focus{
  outline:2px solid var(--focus);
  outline-offset:2px
}

header{
  border-bottom:1px solid var(--border);
  background:color-mix(in srgb, var(--panel) 80%, transparent);
  -webkit-backdrop-filter:saturate(140%) blur(10px);
  backdrop-filter:saturate(140%) blur(10px);
  position:sticky;
  top:0;
  z-index:1000;
}

.container{
  max-width:1200px;
  margin:0 auto;
  padding:16px
}

.topbar, .header-topbar{
  display:flex;
  gap:16px;
  align-items:center;
  justify-content:space-between
}

.brand, .header-brand{
  display:flex;
  gap:12px;
  align-items:center
}

.logo{
  width:36px;
  height:36px;
  border-radius:8px;
  background:radial-gradient(circle at 30% 30%, color-mix(in srgb, var(--brand) 85%, #22c55e) 0 45%, var(--brand) 46% 100%);
  box-shadow:0 0 0 2px #052e16 inset, 0 0 40px rgba(34,197,94,.25);
}

.title{
  font-weight:700;
  letter-spacing:.2px
}

.tag{
  font-size:12px;
  color:var(--sub);
  opacity:.9
}

.controls, .header-controls{
  display:flex;
  gap:12px;
  align-items:center;
  flex-wrap:wrap
}

.select, .input, .btn{
  background:var(--panel);
  color:var(--text);
  border:1px solid var(--border);
  border-radius:10px;
  padding:10px 12px;
  font:inherit;
}

.btn{
  cursor:pointer
}

.btn.brand, .btn--brand{
  background:linear-gradient(90deg,#16a34a,#22c55e);
  border-color:#14532d
}

.btn.accent, .btn--accent{
  background:linear-gradient(90deg,#0284c7,#38bdf8);
  border-color:#0c4a6e
}

.btn.warn, .btn--warn{
  background:linear-gradient(90deg,#b45309,#f59e0b);
  border-color:#78350f
}

.btn.outline, .btn--outline{
  background:transparent;
  border-color:var(--accent);
  color:var(--accent)
}

/* Modern Theme Toggle */
.theme-toggle{
  --toggle-h: 28px;
  --toggle-w: 54px;
  --thumb: #fff;
  --track: var(--panel);
  --shadow: rgba(0,0,0,.3);
  position: relative;
  inline-size: var(--toggle-w);
  block-size: var(--toggle-h);
  border: 1px solid var(--border);
  border-radius: 999px;
  background: var(--track);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  padding: 0;
  transition: background .2s ease, border-color .2s ease;
}
.theme-toggle:focus{
  outline: 2px solid var(--focus);
  outline-offset: 2px;
}
.theme-track{
  position: relative;
  inline-size: calc(var(--toggle-w) - 6px);
  block-size: calc(var(--toggle-h) - 6px);
  border-radius: 999px;
}
.theme-icon{
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  inline-size: 16px;
  block-size: 16px;
  color: var(--accent);
  opacity: .75;
}
.theme-icon.sun{ left: 8px; }
.theme-icon.moon{ right: 8px; }
.theme-thumb{
  position: absolute;
  top: 50%;
  left: 4px;
  transform: translateY(-50%);
  inline-size: 22px;
  block-size: 22px;
  background: var(--thumb);
  border-radius: 50%;
  box-shadow: 0 2px 6px var(--shadow);
  transition: left .2s ease, background .2s ease;
}
/* When pressed => light (thumb to right) */
#theme-toggle[aria-pressed="true"] .theme-thumb{
  left: calc(100% - 26px);
}
/* Adapt thumb color for dark track */
:root:not(.theme-light) #theme-toggle .theme-thumb{
  background: #e2e8f0;
}

/* Profile Dropdown Styles */
.profile-wrapper{
  position:relative;
}

.profile-btn{
  display:flex;
  align-items:center;
  padding:8px;
  border-radius:50%;
  background:var(--panel);
  border:2px solid var(--border);
  transition:all 0.2s ease;
}

.profile-btn:hover{
  border-color:var(--accent);
}

.profile-icon{
  font-size:18px;
}

.profile-dropdown{
  position:absolute;
  top:100%;
  right:0;
  width:320px;
  background:var(--card);
  border:1px solid var(--border);
  border-radius:12px;
  box-shadow:0 20px 40px rgba(0,0,0,.35);
  z-index:1500;
  display:none;
}

.profile-dropdown.active{
  display:block;
}

.profile-header{
  display:flex;
  align-items:center;
  gap:12px;
  padding:16px;
  border-bottom:1px solid var(--border);
  background:linear-gradient(90deg,rgba(56,189,248,.08),rgba(34,197,94,.08));
}

.profile-avatar{
  width:40px;
  height:40px;
  border-radius:50%;
  background:var(--panel);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:20px;
  border:2px solid var(--border);
}

.profile-name{
  font-weight:600;
  color:var(--text);
}

.profile-role{
  font-size:12px;
  color:var(--sub);
}

.profile-content{
  padding:16px;
}

.profile-content h4{
  margin:16px 0 8px 0;
  font-size:14px;
  color:var(--accent);
  text-transform:uppercase;
  letter-spacing:0.5px;
}

.profile-content h4:first-child{
  margin-top:0;
}

.profile-footer{
  margin-top:20px;
  text-align:right;
}

.profile-close{
  font-size:14px;
  padding:8px 16px;
}

.grid{
  display:grid;
  gap:16px
}

/* utility margins */
.mt-8{ margin-top:8px }
.mt-10{ margin-top:10px }
.mt-16{ margin-top:16px }
.mb-10{ margin-bottom:10px }

/* utility flex alignment */
.justify-between{ justify-content:space-between }
.items-center{ align-items:center }

@media(min-width:900px){ 
  .grid.cols-3, .grid.grid-3{
    grid-template-columns:repeat(3,1fr)
  } 
}

@media(min-width:900px){ 
  .grid.cols-2, .grid.grid-2{
    grid-template-columns:2fr 1fr
  } 
}

/* Report view: allow verification column to breathe more on wide screens */
@media(min-width:900px){
  #report-view .grid.cols-2{
    grid-template-columns:minmax(0,1.4fr) minmax(0,1fr);
  }
}

@media(min-width:1200px){
  #report-view .grid.cols-2{
    grid-template-columns:minmax(0,1.5fr) minmax(0,1.15fr);
  }
}

#report-view .stack{
  display:flex;
  flex-direction:column;
  gap:16px;
}

#report-view .stack > .card-compact{
  min-height:420px;
  display:flex;
  flex-direction:column;
}

#report-view .stack > .card-compact .card-body{
  flex:1 1 auto;
  display:flex;
  flex-direction:column;
}

#report-view .table-responsive{
  flex:1 1 auto;
  min-height:0;
  overflow:auto;
  border-radius:12px;
}

#report-view .verify-table{
  width:100%;
  min-width:520px;
  table-layout:fixed;
}

@media(max-width:900px){
  #report-view .stack{
    display:grid;
  }

  #report-view .stack > .card-compact{
    min-height:unset;
    display:block;
  }

  #report-view .stack > .card-compact .card-body{
    display:block;
  }

  #report-view .verify-table{
    min-width:0;
    table-layout:auto;
  }
}

.cards, .card-grid{
  display:grid;
  gap:16px
}

/* vertical stack utility for right-column grouping */
.stack{
  display: grid;
  gap: 16px;
}

@media(min-width:700px){ 
  .cards, .card-grid{
    grid-template-columns:repeat(2,1fr)
  } 
}

@media(min-width:1000px){ 
  .cards, .card-grid{
    grid-template-columns:repeat(3,1fr)
  } 
}

.card{
  border:1px solid var(--border);
  border-radius:16px;
  overflow:hidden;
  background:linear-gradient(180deg,color-mix(in srgb, var(--panel) 90%, transparent),color-mix(in srgb, var(--card) 95%, transparent));
  box-shadow:0 20px 40px rgba(0,0,0,.35);
}

/* Featured vs compact cards for Alerts/Report pages */
.card-featured{
  display:flex;
  flex-direction:column;
  min-height:540px;
}

.card-featured .card-body{
  flex:1 1 auto;
}

.stack > .card-compact{
  display:flex;
  flex-direction:column;
}

.stack > .card-compact .card-body{
  flex:1 1 auto;
}

/* Make right column stack items align heights */
.stack{
  align-content:start;
}

.card-header{
  padding:14px 16px;
  border-bottom:1px solid var(--border);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  background:linear-gradient(90deg,color-mix(in srgb, var(--accent) 12%, transparent),color-mix(in srgb, var(--brand) 12%, transparent));
}

.card-body{
  padding:16px
}

.stat, .stat-item{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:12px 14px;
  border:1px dashed var(--border);
  background:linear-gradient(180deg,color-mix(in srgb, var(--accent) 8%, transparent),color-mix(in srgb, var(--brand) 8%, transparent));
  border-radius:12px;
  margin-bottom:10px
}

nav.tabs{
  margin-top:10px;
  border-bottom:1px solid var(--border)
}

.tab-list{
  display:flex;
  gap:8px;
  flex-wrap:wrap
}

.tab{
  padding:10px 14px;
  border:1px solid var(--border);
  border-bottom:none;
  border-radius:10px 10px 0 0;
  background:var(--panel);
  cursor:pointer;
  color:var(--sub)
}

.tab.active{
  background:linear-gradient(90deg,color-mix(in srgb, var(--accent) 18%, transparent),color-mix(in srgb, var(--brand) 18%, transparent));
  color:var(--text)
}

section.view, .tab-view{
  display:none;
  padding:16px 0
}

section.view.active, .tab-view.active{
  display:block
}

.row, .layout-row{
  display:flex;
  gap:12px;
  flex-wrap:wrap
}

.chip{
  display:inline-flex;
  align-items:center;
  gap:8px;
  background:var(--chip);
  /* Fallback for older browsers: use accent with transparency */
  border:1px solid rgba(2,132,199,0.35);
  border-radius:999px;
  padding:6px 10px;
  /* Fallback: approximate mixed color */
  color:#3aa4da;
  font-size:13px
}

.chip.danger{
  background:#2b1006;
  border-color:#92400e;
  color:#fde68a;
}

.chip.ok{
  background:#052e16;
  border-color:#14532d;
  color:#c4f1be;
}

.ok{
  color:var(--ok)
}

.danger{
  color:var(--danger)
}

.warn{
  color:var(--warn)
}

.muted{
  color:var(--sub)
}

table{
  width:100%;
  border-collapse:collapse
}

th,td{
  padding:10px;
  border-bottom:1px solid var(--border);
  text-align:left
}

th{
  color:var(--sub);
  font-weight:600;
  background:rgba(56,189,248,.06)
}

.kbd{
  background:#0b2430;
  border:1px solid #0d3b45;
  color:#9bd5e2;
  padding:2px 6px;
  border-radius:6px;
  font-size:12px
}

.help, .help-text{
  font-size:13px;
  color:var(--sub)
}

.banner{
  border:1px solid #1e3a3a;
  background:linear-gradient(90deg,color-mix(in srgb, var(--ok) 10%, transparent),color-mix(in srgb, var(--accent) 10%, transparent));
  padding:12px 14px;
  border-radius:12px
}

.lang{
  min-width:160px
}

footer{
  border-top:1px solid var(--border);
  margin-top:20px;
  color:var(--sub)
}

/* role badges */
.role-badge{
  padding:6px 10px;
  border-radius:8px;
  border:1px solid var(--border);
  background:var(--panel);
  font-size:13px
}

.role-citizen{
  color:#c4f1be;
  border-color:#14532d;
  background:#052e16
}

.role-authority{
  color:#bfdbfe;
  border-color:#1e3a8a;
  background:#0a122e
}

.role-ndrf{
  color:#fde68a;
  border-color:#92400e;
  background:#2b1006
}

.role-ngo{
  color:#fbcfe8;
  border-color:#831843;
  background:#2e0a1e
}

/* forms */
label{
  display:block;
  margin:10px 0 6px
}

.switcher{
  display:flex;
  gap:10px;
  align-items:center;
  flex-wrap:wrap
}

.sr-only{
  position:absolute;
  left:-10000px;
  top:auto;
  width:1px;
  height:1px;
  overflow:hidden
}

/* For skip links */
.sr-only.focusable:focus{
  position:static;
  left:auto;
  width:auto;
  height:auto;
  display:inline-block;
  margin:8px;
  padding:8px 12px;
  background:var(--panel);
  border:2px solid var(--focus);
  border-radius:8px;
}

.map-container{
  height:420px;
  border:1px dashed var(--border);
  border-radius:12px;
  background:repeating-linear-gradient(45deg,color-mix(in srgb, var(--bg) 92%, #000),color-mix(in srgb, var(--bg) 92%, #000) 10px,color-mix(in srgb, var(--bg) 86%, #000) 10px,color-mix(in srgb, var(--bg) 86%, #000) 20px);
  /* Leaflet map will replace background when initialized */
  overflow: hidden;
}

/* Resources Map Styles */
.resources-map{
  height:300px;
  border:1px solid var(--border);
  border-radius:12px;
  background:linear-gradient(135deg, color-mix(in srgb, var(--bg) 95%, #fff) 0%, var(--bg) 100%);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  position:relative;
}

.map-placeholder{
  padding:20px;
}

.map-icon{
  font-size:48px;
  display:block;
  margin-bottom:16px;
}

.map-placeholder p{
  color:var(--sub);
  margin-bottom:20px;
  font-size:14px;
}

.map-legend{
  display:flex;
  gap:16px;
  flex-wrap:wrap;
  justify-content:center;
  margin-top:16px;
}

.legend-item{
  display:flex;
  align-items:center;
  gap:6px;
  font-size:12px;
  color:var(--text);
}

.legend-color{
  width:12px;
  height:12px;
  border-radius:50%;
  border:2px solid transparent;
}

.legend-color.shelter{
  background:var(--brand);
  border-color:var(--brand);
}

.legend-color.hospital{
  background:var(--danger);
  border-color:var(--danger);
}

.legend-color.supply{
  background:var(--accent);
  border-color:var(--accent);
}

.legend-color.emergency{
  background:var(--warn);
  border-color:var(--warn);
}

/* Leaflet adjustments (theme-friendly) */
.leaflet-container{
  width: 100%;
  height: 100%;
  background: var(--panel);
  border-radius: 12px;
}
.leaflet-control-container .leaflet-control{
  background: color-mix(in srgb, var(--panel) 90%, transparent);
  border: 1px solid var(--border);
  color: var(--text);
  border-radius: 8px;
}
.leaflet-control-attribution{
  background: color-mix(in srgb, var(--panel) 85%, transparent) !important;
  color: var(--sub) !important;
}

/* Responsive map heights */
@media(max-width: 768px){
  .map-container{ height: 320px; }
}
@media(min-width: 1200px){
  .map-container{ height: 520px; }
}

.map-controls.horizontal {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  align-items: center;
}

.map-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 1rem;
  z-index: 1;
}

/* Education Page Styles */
.education-tabs{
  margin-bottom:20px;
}

.education-tab-list{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  border-bottom:1px solid var(--border);
  padding-bottom:12px;
}

.education-tab{
  padding:12px 20px;
  border:1px solid var(--border);
  border-radius:8px;
  background:var(--panel);
  color:var(--sub);
  cursor:pointer;
  transition:all 0.2s ease;
  font-weight:500;
}

.education-tab.active{
  background:linear-gradient(90deg,color-mix(in srgb, var(--accent) 18%, transparent),color-mix(in srgb, var(--brand) 18%, transparent));
  color:var(--text);
  border-color:var(--accent);
}

.education-tab:hover{
  background:var(--muted);
}

.education-content{
  margin-top:16px;
}

.education-phase{
  display:none;
}

.education-phase.active{
  display:block;
}

.education-heading{
  margin:16px 0 12px 0;
  font-size:16px;
  font-weight:600;
  display:flex;
  align-items:center;
  gap:8px;
}

.education-heading.do{
  color:var(--ok);
}

.education-heading.dont{
  color:var(--danger);
}

.education-list{
  list-style:none;
  padding:0;
  margin:0 0 20px 0;
}

.education-list li{
  padding:10px 0;
  border-bottom:1px dashed var(--border);
  position:relative;
  padding-left:24px;
}

.education-list li:last-child{
  border-bottom:none;
}

.education-list li::before{
  content:'‚Ä¢';
  position:absolute;
  left:8px;
  color:var(--accent);
  font-weight:bold;
}

.education-heading.do ~ .education-list li::before{
  color:var(--ok);
  content:'‚úì';
}

.education-heading.dont ~ .education-list li::before{
  color:var(--danger);
  content:'‚úó';
}

/* Video List Styles */
.video-list{
  display:flex;
  flex-direction:column;
  gap:16px;
}

.video-item{
  display:flex;
  gap:12px;
  padding:12px;
  border:1px solid var(--border);
  border-radius:10px;
  background:linear-gradient(90deg,color-mix(in srgb, var(--accent) 8%, transparent),color-mix(in srgb, var(--brand) 8%, transparent));
  transition:all 0.2s ease;
}

.video-item:hover{
  border-color:var(--accent);
  background:linear-gradient(90deg,color-mix(in srgb, var(--accent) 12%, transparent),color-mix(in srgb, var(--brand) 12%, transparent));
}

/* Thumbnail replaced by inline video */
.video-thumb{
  width:160px;
  height:100px;
  border-radius:8px;
  background:#000;
  object-fit:cover;
  flex-shrink:0;
}

.video-info{
  flex:1;
  min-width:0;
}

.video-info h5{
  margin:0 0 6px 0;
  font-size:14px;
  font-weight:600;
  color:var(--text);
}

.video-info p{
  margin:0 0 8px 0;
  font-size:12px;
  color:var(--sub);
  line-height:1.4;
}

.video-duration{
  font-size:11px;
  color:var(--accent);
  background:rgba(56,189,248,.1);
  padding:2px 6px;
  border-radius:4px;
}

/* Assets Gallery */
.asset-title{
  margin:12px 0;
  color:var(--accent);
  font-size:14px;
  letter-spacing:.3px;
}

.asset-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(120px,1fr));
  gap:12px;
}

.asset-item{
  margin:0;
  padding:10px;
  border:1px solid var(--border);
  border-radius:10px;
  background:linear-gradient(90deg,rgba(56,189,248,.05),rgba(34,197,94,.05));
  display:flex;
  flex-direction:column;
  gap:8px;
  cursor:pointer;
}

.asset-item:focus{
  outline:2px solid var(--focus);
  outline-offset:2px;
}

.asset-thumb{
  width:100%;
  height:90px;
  object-fit:cover;
  border-radius:8px;
  background:var(--muted);
}

.asset-thumb.icon{
  height:64px;
  object-fit:contain;
  padding:6px;
}

.asset-caption{
  font-size:12px;
  color:var(--sub);
  text-overflow:ellipsis;
  white-space:nowrap;
  overflow:hidden;
}

.video-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
  gap:12px;
}

.video-card{
  border:1px solid var(--border);
  border-radius:10px;
  padding:8px;
  background:linear-gradient(90deg,color-mix(in srgb, var(--accent) 8%, transparent),color-mix(in srgb, var(--brand) 8%, transparent));
}

.video-card video{
  width:100%;
  height:150px;
  border-radius:8px;
  background:#000;
}

.video-meta{
  font-size:12px;
  color:var(--sub);
  margin-top:6px;
}

.doc-list{
  list-style:none;
  padding:0;
  margin:0;
}

.doc-item{
  padding:8px 0;
  border-bottom:1px dashed var(--border);
}

.doc-item:last-child{
  border-bottom:none;
}

/* Lightbox */
.lightbox{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.7);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:2000;
}

.lightbox.active{ display:flex; }

.lightbox img{
  max-width:90vw;
  max-height:80vh;
  border-radius:10px;
  box-shadow:0 20px 40px rgba(0,0,0,.5);
}

.lightbox-caption{
  position:absolute;
  bottom:30px;
  left:50%;
  transform:translateX(-50%);
  color:#fff;
  background:rgba(0,0,0,.4);
  padding:6px 10px;
  border-radius:6px;
  font-size:13px;
}

.lightbox-close{
  position:absolute;
  top:20px;
  right:20px;
  width:36px;
  height:36px;
  border-radius:50%;
  border:1px solid var(--border);
  background:var(--panel);
  color:var(--text);
  cursor:pointer;
  font-size:20px;
  line-height:1;
}

/* responsive tweak */
@media(max-width:520px){ 
  .hide-sm{
    display:none
  }

  .profile-dropdown{
    width:280px;
  }

  .education-tab-list{
    flex-direction:column;
  }

  .map-legend{
    flex-direction:column;
    gap:8px;
  }
}

@media(max-width:768px){
  .grid.cols-2{
    grid-template-columns:1fr;
  }

  /* So featured cards don't become too tall on small screens */
  .card-featured{
    min-height:unset;
  }

  .education-content .grid.cols-2{
    grid-template-columns:1fr;
  }
}

/* ======================
   Community Chat (Volunteers)
   ====================== */
.chat-fab{
  position: fixed;
  right: 24px;
  bottom: 24px;
  z-index: 1200;
  inline-size: 56px;
  block-size: 56px;
  border-radius: 50%;
  border: 1px solid var(--border);
  background: linear-gradient(135deg, color-mix(in srgb, var(--accent) 18%, transparent), color-mix(in srgb, var(--brand) 18%, transparent));
  color: var(--text);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 10px 25px rgba(0,0,0,.35);
}
.chat-fab-icon{ font-size: 22px; }

.chat-panel{
  position: fixed;
  right: 24px;
  bottom: 92px;
  inline-size: min(420px, calc(100vw - 32px));
  max-block-size: min(70vh, 640px);
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 14px;
  box-shadow: 0 20px 50px rgba(0,0,0,.45);
  display: none;
  flex-direction: column;
  overflow: hidden;
  z-index: 1200;
}
.chat-panel.active{ display: flex; }

.chat-header{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 12px 12px 12px 14px;
  border-bottom: 1px solid var(--border);
  background: linear-gradient(90deg, color-mix(in srgb, var(--accent) 14%, transparent), color-mix(in srgb, var(--brand) 14%, transparent));
}
.chat-title-group{ display:flex; flex-direction:column; min-width:0; }
.chat-title{ font-weight: 700; }
.chat-subtitle{ font-size: 12px; color: var(--sub); }
.chat-actions{ display:flex; align-items:center; gap:8px; }
.chat-close{ background: transparent; border-color: var(--border); }
.chat-clear{ font-size: 12px; padding: 6px 10px; }

.chat-body{
  padding: 10px;
  overflow: auto;
  background: linear-gradient(180deg, color-mix(in srgb, var(--panel) 92%, transparent), color-mix(in srgb, var(--panel) 96%, transparent));
}
.chat-messages{ list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:8px; }
.chat-msg{
  display: grid;
  grid-template-columns: auto 1fr auto;
  gap: 6px 10px;
  align-items: center;
}
.chat-msg .who{ font-weight: 600; color: var(--accent); }
.chat-msg .time{ font-size: 11px; color: var(--sub); }
.chat-bubble{
  grid-column: 1 / -1;
  background: var(--panel);
  border: 1px solid var(--border);
  padding: 8px 10px;
  border-radius: 10px;
  word-wrap: anywhere;
}
.chat-bubble.me{ background: color-mix(in srgb, var(--brand) 12%, var(--panel)); }
.chat-bubble.official{ background: color-mix(in srgb, var(--accent) 12%, var(--panel)); }

.chat-input{
  display: flex;
  gap: 8px;
  align-items: center;
  padding: 10px;
  border-top: 1px solid var(--border);
}
.chat-input .input{ flex: 1; }

/* Only show chat controls within the Volunteers tab context */
#volunteers-view .chat-fab{ display: inline-flex; }
#volunteers-view:not(.active) .chat-fab{ display: none; }

@media(max-width:520px){
  .chat-panel{
    right: 12px;
    left: 12px;
    inline-size: auto;
    bottom: 84px;
  }
  .chat-fab{ right: 12px; bottom: 12px; }
}

body.modal-open{ overflow:hidden; }

.volunteer-cta-bar{
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  justify-content:space-between;
  gap:1.5rem;
  margin-bottom:1.5rem;
  padding:1.5rem;
  background:var(--card);
  border-radius:1rem;
  box-shadow:0 12px 30px -24px rgba(15,23,42,0.75);
}

.volunteer-cta-copy h2{ margin:0 0 .35rem; font-size:1.5rem; }
.volunteer-cta-copy p{ margin:0; max-width:520px; color:var(--sub); }

.btn.volunteer-cta{
  background:linear-gradient(135deg,#2563eb,#7c3aed);
  color:#fff;
  border:none;
  padding:.85rem 1.75rem;
  font-weight:600;
  box-shadow:0 18px 32px -24px rgba(67,56,202,0.85);
}
.btn.volunteer-cta:hover{ filter:brightness(1.05); }
.btn.volunteer-cta:focus-visible{
  outline:3px solid rgba(124,58,237,0.7);
  outline-offset:3px;
}

.modal{
  --modal-gap: clamp(1rem, 2vw, 1.5rem);
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  padding:var(--modal-gap);
  z-index:1400;
  overflow-y:auto;
}

.modal.active{ display:flex; }

.modal-backdrop{
  position:absolute;
  inset:0;
  background:rgba(15,23,42,0.55);
  -webkit-backdrop-filter:blur(3px);
  backdrop-filter:blur(3px);
}

.modal-content{
  --modal-footer-height: clamp(3.25rem, 6vh, 4.5rem);
  position:relative;
  z-index:1;
  background:var(--card);
  border-radius:1rem;
  width:100%;
  max-width:min(680px, calc(100vw - (2 * var(--modal-gap))));
  height:min(760px, calc(100vh - (2 * var(--modal-gap))));
  max-height:min(760px, calc(100vh - (2 * var(--modal-gap))));
  display:flex;
  flex-direction:column;
  overflow:hidden;
  box-shadow:0 35px 80px -45px rgba(15,23,42,0.85);
}

.modal-content form{
  display:flex;
  flex-direction:column;
  flex:1 1 auto;
  min-height:0;
  overflow:hidden;
}

.modal-header,
.modal-footer{ display:flex; align-items:center; justify-content:space-between; gap:1rem; padding:1.25rem 1.5rem; }
.modal-header{ border-bottom:1px solid rgba(148,163,184,0.14); }
.modal-footer{ border-top:1px solid rgba(148,163,184,0.14); flex-wrap:wrap; justify-content:flex-end; background:var(--card); position:sticky; bottom:0; z-index:2; min-height:var(--modal-footer-height); }
.modal-header h2{ margin:0; font-size:1.35rem; }
.modal-close{ background:none; border:none; font-size:1.5rem; cursor:pointer; color:var(--sub); }

.modal-body{
  padding:clamp(1.25rem, 2vh + .5rem, 1.75rem);
  display:flex;
  flex-direction:column;
  gap:1rem;
  flex:1 1 auto;
  min-height:0;
  overflow-y:auto;
  overscroll-behavior:contain;
  padding-bottom:calc(var(--modal-footer-height) + clamp(.75rem, 1.5vh, 1.25rem));
}
.form-group{ display:flex; flex-direction:column; gap:.35rem; }
.form-grid{ display:grid; gap:1rem; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); }
.modal-body label, .modal-body legend{ font-weight:600; }
.required{ color:#ef4444; margin-left:.25rem; }

.skills-grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(160px,1fr)); gap:.75rem; margin-top:.5rem; }
.skills-grid label{ display:inline-flex; align-items:center; gap:.5rem; padding:.5rem .85rem; border-radius:999px; background:rgba(59,130,246,0.12); font-size:.95rem; cursor:pointer; }
.skills-grid input{ accent-color:#2563eb; }

.form-help{ font-size:.9rem; color:var(--sub); }
.form-feedback{ min-height:1.25rem; font-weight:600; font-size:.95rem; }
.form-feedback.error{ color:#f87171; }
.form-feedback.success{ color:#22c55e; }

.volunteer-applications-table{ width:100%; border-collapse:collapse; }
.volunteer-applications-table th,
.volunteer-applications-table td{ padding:.75rem; border-bottom:1px solid rgba(148,163,184,0.14); text-align:left; }
.volunteer-applications-table td:last-child{ white-space:nowrap; }

.status-pill{ display:inline-flex; align-items:center; gap:.45rem; padding:.25rem .75rem; border-radius:999px; font-weight:600; text-transform:capitalize; font-size:.85rem; }
.status-pill.pending{ background:rgba(234,179,8,0.15); color:#f59e0b; }
.status-pill.approved{ background:rgba(34,197,94,0.2); color:#22c55e; }
.status-pill.rejected{ background:rgba(248,113,113,0.2); color:#f43f5e; }

.volunteer-action-buttons{ display:flex; gap:.5rem; }
.volunteer-action-buttons .btn{ padding:.4rem .8rem; font-size:.85rem; }

#volunteer-applications-message{ margin-bottom:.75rem; font-weight:500; }
#volunteer-applications-message.error{ color:#f87171; }

@media(max-width:720px){
  .volunteer-cta-bar{ flex-direction:column; align-items:flex-start; }
  .modal{ --modal-gap: clamp(.75rem, 1.5vw, 1rem); }
  .modal-content{ max-height:calc(100vh - (2 * var(--modal-gap))); max-width:calc(100vw - (2 * var(--modal-gap))); }
}

/* Search Bar Styles */
.search-wrapper {
  position: relative;
}

#global-search {
  padding-left: 2.5rem;
  width: 250px;
  transition: width 0.3s ease-in-out;
}

#global-search:focus {
  width: 350px;
}

.search-wrapper::before {
  content: 'üîç';
  position: absolute;
  left: 0.75rem;
  top: 50%;
  transform: translateY(-50%);
  opacity: 0.5;
}